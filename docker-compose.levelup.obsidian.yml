services:
  obsidian:
    image: lscr.io/linuxserver/obsidian:latest
    container_name: visor-levelup-obsidian
    security_opt:
      - seccomp:unconfined
    env_file:
      - .levelup.env
    environment:
      - PUID=${OBSIDIAN_PUID:-1000}
      - PGID=${OBSIDIAN_PGID:-1000}
      - TZ=${TZ:-Europe/Vienna}
      - CUSTOM_USER=${OBSIDIAN_CUSTOM_USER:-}
      - PASSWORD=${OBSIDIAN_PASSWORD:-}
      - SUBFOLDER=${OBSIDIAN_SUBFOLDER:-/}
      - TITLE=${OBSIDIAN_TITLE:-Visor Obsidian}
    volumes:
      - ${OBSIDIAN_CONFIG_PATH:-/root/code/visor/data/levelups/obsidian/config}:/config
      - ${OBSIDIAN_VAULT_PATH:-/root/code/visor/data/levelups/obsidian/vault}:/vault
    expose:
      - "3000"
      - "3001"
    ports:
      - "127.0.0.1:${OBSIDIAN_HOST_PORT:-3003}:3000"
    networks:
      - proxy
      - levelup-obsidian
    restart: unless-stopped

networks:
  proxy:
    name: visor-proxy
  levelup-obsidian:
    name: visor-levelup-obsidian
